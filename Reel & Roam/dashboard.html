<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TripPlanner Dashboard with Smart Budget Splitter</title>
    <link rel="stylesheet" href="dashboard.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
</head>

<body class="dashboard-body">
    <!-- Sidebar -->
    <div class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <i class="fas fa-plane"></i>
            <span>Reel & Roam</span>
        </div>
        <nav class="sidebar-nav">
            <a href="#dashboard" class="nav-item active" onclick="showSection('dashboard')">
                <i class="fas fa-home"></i>
                <span>Dashboard</span>
            </a>
            <a href="#plan-trip" class="nav-item" onclick="showSection('plan-trip')">
                <i class="fas fa-map"></i>
                <span>Plan Trip</span>
            </a>
            <a href="#budget" class="nav-item" onclick="showSection('budget')">
                <i class="fas fa-dollar-sign"></i>
                <span>Smart Budget</span>
            </a>
            <a href="#memories" class="nav-item" onclick="showSection('memories')">
                <i class="fas fa-camera"></i>
                <span>Memories</span>
            </a>
            <a href="#alerts" class="nav-item" onclick="showSection('alerts')">
                <i class="fas fa-bell"></i>
                <span>Alerts</span>
            </a>
            <a href="#admin" class="nav-item admin-only" onclick="showSection('admin')" style="display: none;">
                <i class="fas fa-cog"></i>
                <span>Admin</span>
            </a>
        </nav>
        <div class="sidebar-footer">
            <button class="logout-btn" onclick="logout()">
                <i class="fas fa-sign-out-alt"></i>
                <span>Logout</span>
            </button>
        </div>
    </div>

    <!-- Main Content -->
    <div class="main-content">
        <!-- Header -->
        <header class="dashboard-header">
            <button class="sidebar-toggle" onclick="toggleSidebar()">
                <i class="fas fa-bars"></i>
            </button>
            <div class="header-right">
                <div class="user-info">
                    <span id="userName">Welcome back!</span>
                    <div class="user-avatar">
                        <i class="fas fa-user"></i>
                    </div>
                </div>
            </div>
        </header>

        <!-- Dashboard Section -->
        <section id="dashboard-section" class="content-section active">
            <div class="section-header">
                <h1>Dashboard</h1>
                <p>Your travel overview</p>
            </div>

            <!-- Stats Cards -->
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-map-marker-alt"></i>
                    </div>
                    <div class="stat-content">
                        <h3 id="totalTrips">5</h3>
                        <p>Total Trips</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-globe"></i>
                    </div>
                    <div class="stat-content">
                        <h3 id="countriesVisited">8</h3>
                        <p>Countries Visited</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-dollar-sign"></i>
                    </div>
                    <div class="stat-content">
                        <h3 id="totalSpent">$2,450</h3>
                        <p>Total Spent</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-camera"></i>
                    </div>
                    <div class="stat-content">
                        <h3 id="totalPhotos">124</h3>
                        <p>Memories</p>
                    </div>
                </div>
            </div>

            <!-- Recent Trips -->
            <div class="dashboard-card">
                <div class="card-header">
                    <h2>Recent Trips</h2>
                    <button class="btn-primary" onclick="showSection('plan-trip')">Plan New Trip</button>
                </div>
                <div class="trips-list" id="recentTrips">
                    <div class="trip-item">
                        <div class="trip-image">
                            <i class="fas fa-camera"></i>
                        </div>
                        <div class="trip-details">
                            <h4>Paris Adventure</h4>
                            <p>May 15-22, 2024 ‚Ä¢ 7 days</p>
                            <span class="trip-status completed">Completed</span>
                        </div>
                        <div class="trip-budget">$1,200</div>
                    </div>
                    <div class="trip-item">
                        <div class="trip-image">
                            <i class="fas fa-mountain"></i>
                        </div>
                        <div class="trip-details">
                            <h4>Tokyo Discovery</h4>
                            <p>June 10-17, 2024 ‚Ä¢ 8 days</p>
                            <span class="trip-status upcoming">Upcoming</span>
                        </div>
                        <div class="trip-budget">$1,800</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Plan Trip Section -->
        <section id="plan-trip-section" class="content-section">
            <div class="section-header">
                <h1>Plan New Trip</h1>
                <p>Create your next adventure</p>
            </div>

            <div class="trip-planner">
                <!-- Trip Type Selection -->
                <div class="planner-card">
                    <h3>Select Trip Type</h3>
                    <div class="trip-types">
                        <div class="trip-type" onclick="selectTripType('solo')">
                            <i class="fas fa-user"></i>
                            <h4>Solo</h4>
                            <p>Personal adventure</p>
                        </div>
                        <div class="trip-type" onclick="selectTripType('couple')">
                            <i class="fas fa-heart"></i>
                            <h4>Couple</h4>
                            <p>Romantic getaway</p>
                        </div>
                        <div class="trip-type" onclick="selectTripType('friends')">
                            <i class="fas fa-users"></i>
                            <h4>Friends</h4>
                            <p>Group adventure</p>
                        </div>
                    </div>
                </div>

                <!-- Destination Selection -->
                <div class="planner-card">
                    <h3>Choose Destination</h3>
                    <div class="destination-search">
                        <input type="text" id="destinationInput" placeholder="Search destinations...">
                        <button onclick="searchDestinations()">
                            <i class="fas fa-search"></i>
                        </button>
                    </div>
                    <div class="destinations-grid" id="destinationsGrid">
                        <div class="destination-card" onclick="selectDestination('Paris')">
                            <div class="destination-image">
                                <i class="fas fa-landmark"></i>
                            </div>
                            <div class="destination-info">
                                <h4>Paris, France</h4>
                                <p>City of Light</p>
                            </div>
                        </div>
                        <div class="destination-card" onclick="selectDestination('Tokyo')">
                            <div class="destination-image">
                                <i class="fas fa-torii-gate"></i>
                            </div>
                            <div class="destination-info">
                                <h4>Tokyo, Japan</h4>
                                <p>Modern Metropolis</p>
                            </div>
                        </div>
                        <div class="destination-card" onclick="selectDestination('Bali')">
                            <div class="destination-image">
                                <i class="fas fa-umbrella-beach"></i>
                            </div>
                            <div class="destination-info">
                                <h4>Bali, Indonesia</h4>
                                <p>Tropical Paradise</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Trip Details -->
                <div class="planner-card">
                    <h3>Trip Details</h3>
                    <form id="tripDetailsForm" onsubmit="createTrip(event)">
                        <div class="form-row">
                            <div class="form-group">
                                <label>Trip Title</label>
                                <input type="text" id="tripTitle" placeholder="My Amazing Trip">
                            </div>
                            <div class="form-group">
                                <label>Duration</label>
                                <select id="tripDuration">
                                    <option value="1-3">1-3 days</option>
                                    <option value="4-7">4-7 days</option>
                                    <option value="1-2weeks">1-2 weeks</option>
                                    <option value="2weeks+">2+ weeks</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label>Start Date</label>
                                <input type="date" id="startDate">
                            </div>
                            <div class="form-group">
                                <label>Budget (USD)</label>
                                <input type="number" id="tripBudget" placeholder="1000">
                            </div>
                        </div>
                        <button type="submit" class="btn-primary full-width">Create Trip</button>
                    </form>
                </div>

                <!-- Map -->
                <div class="planner-card">
                    <h3>Location Map</h3>
                    <div id="plannerMap" class="trip-map"></div>
                </div>
            </div>
        </section>

        <!-- Smart Budget Splitter Section -->
        <section id="budget-section" class="content-section">
            <div class="section-header">
                <h1>Smart Budget Splitter</h1>
                <p>AI-powered budget planning with destination insights</p>
            </div>

            <div class="smart-budget-container">
                <!-- Trip Type Selection -->
                <div class="budget-card">
                    <h3>Trip Type</h3>
                    <div class="smart-trip-types">
                        <button class="smart-trip-type-btn active" data-type="solo">
                            <i class="fas fa-user"></i>
                            <span>Solo Travel</span>
                        </button>
                        <button class="smart-trip-type-btn" data-type="couple">
                            <i class="fas fa-heart"></i>
                            <span>Couple</span>
                        </button>
                        <button class="smart-trip-type-btn" data-type="friends">
                            <i class="fas fa-users"></i>
                            <span>Friends Group</span>
                        </button>
                    </div>
                </div>

                <!-- Main Budget Tool -->
                <div class="budget-tool-grid">
                    <div class="budget-card">
                        <h3>Trip Details</h3>
                        <div class="smart-form">
                            <input type="text" id="smartTripDestination"
                                placeholder="Enter destination (e.g., Paris, Tokyo)" class="smart-input">
                            <input type="number" id="smartTripDays" placeholder="Number of days" min="1" max="30"
                                class="smart-input">
                            <input type="number" id="smartGroupSize" placeholder="Group size" value="1" min="1" max="20"
                                class="smart-input">
                            <input type="number" id="smartTotalBudget" placeholder="Total budget ($)" min="100"
                                class="smart-input">
                            <button id="calculateSmartBtn" class="btn-primary smart-calc-btn">
                                <i class="fas fa-brain"></i>
                                Calculate Smart Budget
                            </button>
                        </div>
                    </div>

                    <div class="budget-card">
                        <h3>Smart Budget Breakdown</h3>
                        <div class="budget-breakdown">
                            <div class="breakdown-item">
                                <div class="breakdown-icon">üè®</div>
                                <span class="breakdown-label">Accommodation:</span>
                                <span id="smartAccommodation" class="breakdown-amount">$0</span>
                            </div>
                            <div class="breakdown-item">
                                <div class="breakdown-icon">üçΩ</div>
                                <span class="breakdown-label">Food & Drinks:</span>
                                <span id="smartFood" class="breakdown-amount">$0</span>
                            </div>
                            <div class="breakdown-item">
                                <div class="breakdown-icon">üöó</div>
                                <span class="breakdown-label">Transportation:</span>
                                <span id="smartTransport" class="breakdown-amount">$0</span>
                            </div>
                            <div class="breakdown-item">
                                <div class="breakdown-icon">üéØ</div>
                                <span class="breakdown-label">Activities:</span>
                                <span id="smartActivities" class="breakdown-amount">$0</span>
                            </div>
                            <div class="breakdown-item">
                                <div class="breakdown-icon">üí∞</div>
                                <span class="breakdown-label">Emergency Fund:</span>
                                <span id="smartEmergency" class="breakdown-amount">$0</span>
                            </div>
                        </div>
                    </div>

                    <div class="budget-card">
                        <h3>Smart Trip Advice</h3>
                        <div id="smartTripAdvice" class="trip-advice">
                            <div class="advice-item">
                                <span class="advice-icon">üí°</span>
                                <span>Enter your trip details to get personalized advice!</span>
                            </div>
                        </div>

                        <div class="budget-summary">
                            <h4>Budget Summary</h4>
                            <div class="summary-item">
                                <span>Total Budget:</span>
                                <span id="smartTotalDisplay" class="summary-amount">$0</span>
                            </div>
                            <div class="summary-item highlight">
                                <span>Per Person:</span>
                                <span id="smartPerPerson" class="summary-amount">$0</span>
                            </div>
                            <div class="summary-item">
                                <span>Per Day:</span>
                                <span id="smartPerDay" class="summary-amount">$0</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Map and Attractions -->
                <div class="budget-card">
                    <h3>
                        <i class="fas fa-map-marker-alt"></i>
                        Destination Map & Attractions
                    </h3>
                    <div id="smartBudgetMap" class="smart-map"></div>
                    <div id="smartAttractionsGrid" class="attractions-grid">
                        <!-- Attractions will be populated here -->
                    </div>
                </div>
            </div>
        </section>

        <!-- Memories Section -->
        <section id="memories-section" class="content-section">
            <div class="section-header">
                <h1>Memory Gallery</h1>
                <p>Your travel moments</p>
            </div>

            <div class="memories-container">
                <div class="upload-card">
                    <div class="upload-area" onclick="document.getElementById('photoUpload').click()">
                        <i class="fas fa-cloud-upload-alt"></i>
                        <h3>Upload Photos</h3>
                        <p>Drag and drop or click to select</p>
                        <input type="file" id="photoUpload" multiple accept="image/*" style="display: none;">
                    </div>
                </div>

                <div class="gallery-filters">
                    <button class="filter-btn active" onclick="filterMemories('all')">All</button>
                    <button class="filter-btn" onclick="filterMemories('recent')">Recent</button>
                    <button class="filter-btn" onclick="filterMemories('favorites')">Favorites</button>
                </div>

                <div class="memories-gallery" id="memoriesGallery">
                    <div class="memory-card">
                        <div class="memory-image">
                            <i class="fas fa-image"></i>
                        </div>
                        <div class="memory-info">
                            <h4>Paris Sunset</h4>
                            <p>May 18, 2024</p>
                        </div>
                    </div>
                    <div class="memory-card">
                        <div class="memory-image">
                            <i class="fas fa-image"></i>
                        </div>
                        <div class="memory-info">
                            <h4>Eiffel Tower</h4>
                            <p>May 16, 2024</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Alerts Section -->
        <section id="alerts-section" class="content-section">
            <div class="section-header">
                <h1>Trip Alerts</h1>
                <p>Stay updated on your travels</p>
            </div>

            <div class="alerts-container">
                <div class="alerts-settings">
                    <h3>Notification Settings</h3>
                    <div class="setting-item">
                        <label>
                            <input type="checkbox" id="weatherAlerts" checked>
                            <span>Weather Updates</span>
                        </label>
                    </div>
                    <div class="setting-item">
                        <label>
                            <input type="checkbox" id="flightAlerts" checked>
                            <span>Flight Changes</span>
                        </label>
                    </div>
                    <div class="setting-item">
                        <label>
                            <input type="checkbox" id="budgetAlerts">
                            <span>Budget Warnings</span>
                        </label>
                    </div>
                </div>

                <div class="alerts-list">
                    <h3>Recent Alerts</h3>
                    <div id="alertsList">
                        <div class="alert-item">
                            <div class="alert-icon weather">
                                <i class="fas fa-cloud-rain"></i>
                            </div>
                            <div class="alert-content">
                                <h4>Weather Update</h4>
                                <p>Rain expected in Tokyo tomorrow</p>
                                <span class="alert-time">2 hours ago</span>
                            </div>
                        </div>
                        <div class="alert-item">
                            <div class="alert-icon flight">
                                <i class="fas fa-plane"></i>
                            </div>
                            <div class="alert-content">
                                <h4>Flight Reminder</h4>
                                <p>Check-in opens in 24 hours</p>
                                <span class="alert-time">1 day ago</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Admin Section -->
        <section id="admin-section" class="content-section">
            <div class="section-header">
                <h1>Admin Panel</h1>
                <p>System management</p>
            </div>

            <div class="admin-container">
                <div class="admin-stats">
                    <div class="admin-card">
                        <h3>User Analytics</h3>
                        <div class="metric">
                            <span>Total Users:</span>
                            <span>1,234</span>
                        </div>
                        <div class="metric">
                            <span>Active Users:</span>
                            <span>856</span>
                        </div>
                        <div class="metric">
                            <span>New This Month:</span>
                            <span>127</span>
                        </div>
                    </div>

                    <div class="admin-card">
                        <h3>Trip Statistics</h3>
                        <div class="metric">
                            <span>Total Trips:</span>
                            <span>2,567</span>
                        </div>
                        <div class="metric">
                            <span>Completed:</span>
                            <span>2,234</span>
                        </div>
                        <div class="metric">
                            <span>Upcoming:</span>
                            <span>333</span>
                        </div>
                    </div>
                </div>

                <div class="admin-actions">
                    <div class="admin-card">
                        <h3>Content Management</h3>
                        <button class="admin-btn">Manage Destinations</button>
                        <button class="admin-btn">Review Photos</button>
                        <button class="admin-btn">User Reports</button>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- Scripts -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="https://unpkg.com/animejs@3.2.1/lib/anime.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>

    <script>
        // Global variables
        let currentSection = 'dashboard';
        let selectedTripType = 'solo';
        let currentSmartTripType = 'solo';
        let smartBudgetMap = null;
        let plannerMapInstance = null;

        // Navigation functions
        function showSection(section) {
            // Hide all sections
            document.querySelectorAll('.content-section').forEach(sec => {
                sec.classList.remove('active');
            });

            // Remove active class from all nav items
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });

            // Show selected section
            document.getElementById(section + '-section').classList.add('active');

            // Add active class to clicked nav item
            document.querySelector(`[onclick="showSection('${section}')"]`).classList.add('active');

            currentSection = section;

            // Initialize maps when sections are shown
            if (section === 'budget' && !smartBudgetMap) {
                setTimeout(initSmartBudgetMap, 100);
            }
            if (section === 'plan-trip' && !plannerMapInstance) {
                setTimeout(initPlannerMap, 100);
            }

            // Close sidebar on mobile
            if (window.innerWidth <= 768) {
                toggleSidebar();
            }
        }

        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            sidebar.classList.toggle('open');
        }

        // Trip planning functions
        function selectTripType(type) {
            selectedTripType = type;
            document.querySelectorAll('.trip-type').forEach(el => {
                el.classList.remove('selected');
            });
            event.currentTarget.classList.add('selected');
        }

        function selectDestination(destination) {
            document.getElementById('destinationInput').value = destination;
            // Update planner map
            if (plannerMapInstance) {
                updatePlannerMap(destination);
            }
        }

        function searchDestinations() {
            const query = document.getElementById('destinationInput').value;
            console.log('Searching for destinations:', query);
            // Implementation for destination search
        }

        function createTrip(event) {
            event.preventDefault();
            const formData = {
                title: document.getElementById('tripTitle').value,
                duration: document.getElementById('tripDuration').value,
                startDate: document.getElementById('startDate').value,
                budget: document.getElementById('tripBudget').value,
                type: selectedTripType
            };
            console.log('Creating trip:', formData);
            alert('Trip created successfully!');
        }

        // Smart Budget Splitter functionality
        const destinationBudgetData = {
            'paris': { accommodation: 40, food: 25, transport: 10, activities: 20, emergency: 5 },
            'tokyo': { accommodation: 35, food: 30, transport: 15, activities: 15, emergency: 5 },
            'bali': { accommodation: 25, food: 20, transport: 15, activities: 30, emergency: 10 },
            'london': { accommodation: 45, food: 30, transport: 12, activities: 10, emergency: 3 },
            'new york': { accommodation: 50, food: 25, transport: 8, activities: 12, emergency: 5 },
            'thailand': { accommodation: 20, food: 15, transport: 20, activities: 35, emergency: 10 },
            'rome': { accommodation: 35, food: 28, transport: 12, activities: 20, emergency: 5 },
            'barcelona': { accommodation: 30, food: 25, transport: 15, activities: 25, emergency: 5 },
            'amsterdam': { accommodation: 40, food: 30, transport: 10, activities: 15, emergency: 5 },
            'dubai': { accommodation: 45, food: 20, transport: 15, activities: 15, emergency: 5 },
            'india': { accommodation: 1660, food: 830, transport: 415, activities: 830, emergency: 415 },
            'default': { accommodation: 35, food: 25, transport: 15, activities: 20, emergency: 5 }
        };

        const tripAdviceData = {
            'paris': [
                'ü•ê Book accommodations in advance, especially during summer',
                'üöá Get a weekly metro pass for easy transportation',
                'üç∑ Try local bistros instead of tourist restaurants',
                'üé® Many museums are free on first Sunday mornings'
            ],
            'tokyo': [
                'üè® Consider capsule hotels for budget accommodation',
                'üçú Eat at convenience stores and local ramen shops',
                'üöÑ Get a JR Pass if traveling between cities',
                'üå∏ Visit during cherry blossom season for best experience'
            ],
            'bali': [
                'üèñ Stay in Ubud for culture, Canggu for beaches',
                'üõµ Rent a scooter for easy island exploration',
                'üçΩ Local warungs offer authentic and cheap meals',
                'üíÜ‚Äç‚ôÄ Budget extra for spa treatments and activities'
            ],
            'london': [
                'üè∞ Many museums and galleries offer free admission',
                'üöá Get an Oyster card for public transport savings',
                'üç∫ Try traditional pubs for authentic British experience',
                '‚òÇÔ∏è Always carry an umbrella for unpredictable weather'
            ],
            'new york': [
                'üóΩ Buy MetroCard for subway and bus transportation',
                'üçï Try authentic NY pizza and deli sandwiches',
                'üé≠ Book Broadway shows in advance for better prices',
                'üå≥ Central Park and many attractions are free'
            ],
            'thailand': [
                'üèõ Dress modestly when visiting temples',
                'üõ∂ Try floating markets for authentic experience',
                'üå∂ Start with mild spice levels in local food',
                'üíÜ‚Äç‚ôÄ Thai massages are affordable and authentic'
            ],
            'india': [
                'üïå Remove shoes and dress modestly at religious sites',
                'üçõ Try a local thali ‚Äî a complete regional meal on one plate',
                'üíß Stick to bottled or filtered water to avoid stomach issues',
                'üõï Some temples have separate queues for locals and foreigners ‚Äî follow signs',
                'üöó Prefer prepaid taxis or trusted apps like Ola or Uber for safer rides',
                'üí± Always carry some cash ‚Äî small vendors may not accept UPI/cards',
                'üé≠ Every 100km brings a new language, food, and culture ‚Äî embrace it!',
                'üß£ Cover your head in Sikh gurudwaras (e.g., Golden Temple in Amritsar)',
                'ü™î Visit during festivals like Diwali or Holi for unforgettable experiences',
                'üìµ In remote or mountain areas, mobile signals drop ‚Äî download offline maps ahead'
            ],
            'default': [
                'üí° Research local transportation options',
                'üè® Book accommodations with good reviews',
                'üçΩ Try local cuisine for authentic experiences',
                'üì± Download offline maps and translation apps'
            ]
        };

        const destinationAttractions = {
            'paris': [
                { name: 'Eiffel Tower', icon: 'üóº', cost: '$25' },
                { name: 'Louvre Museum', icon: 'üé®', cost: '$17' },
                { name: 'Seine River Cruise', icon: 'üö¢', cost: '$15' },
                { name: 'Arc de Triomphe', icon: 'üèõ', cost: '$13' },
                { name: 'Notre-Dame Cathedral', icon: '‚õ™', cost: 'Free' },
                { name: 'Montmartre District', icon: 'üé≠', cost: 'Free' }
            ],
            'tokyo': [
                { name: 'Tokyo Skytree', icon: 'üèó', cost: '$18' },
                { name: 'Senso-ji Temple', icon: '‚õ©', cost: 'Free' },
                { name: 'Shibuya Crossing', icon: 'üö∂‚Äç‚ôÇÔ∏è', cost: 'Free' },
                { name: 'Tsukiji Fish Market', icon: 'üêü', cost: '$10' },
                { name: 'Imperial Palace', icon: 'üèØ', cost: 'Free' },
                { name: 'Harajuku District', icon: 'üåà', cost: 'Free' }
            ],
            'bali': [
                { name: 'Tanah Lot Temple', icon: 'üèõ', cost: '$3' },
                { name: 'Rice Terraces', icon: 'üåæ', cost: '$2' },
                { name: 'Beach Clubs', icon: 'üèñ', cost: '$20' },
                { name: 'Monkey Forest', icon: 'üêµ', cost: '$3' },
                { name: 'Volcano Trek', icon: 'üåã', cost: '$45' },
                { name: 'Traditional Spa', icon: 'üíÜ‚Äç‚ôÄÔ∏è', cost: '$15' }
            ],
            'london': [
                { name: 'Big Ben', icon: 'üï∞', cost: 'Free' },
                { name: 'British Museum', icon: 'üèõ', cost: 'Free' },
                { name: 'Thames Cruise', icon: 'üö¢', cost: '$12' },
                { name: 'Tower of London', icon: 'üè∞', cost: '$30' },
                { name: 'London Eye', icon: 'üé°', cost: '$27' },
                { name: 'Camden Market', icon: 'üõç', cost: 'Free' }
            ],
            'new york': [
                { name: 'Statue of Liberty', icon: 'üóΩ', cost: '$23' },
                { name: 'Central Park', icon: 'üå≥', cost: 'Free' },
                { name: 'Broadway Show', icon: 'üé≠', cost: '$75' },
                { name: 'Empire State Building', icon: 'üè¢', cost: '$37' },
                { name: 'Brooklyn Bridge', icon: 'üåâ', cost: 'Free' },
                { name: 'Times Square', icon: 'üåü', cost: 'Free' }
            ],
            'thailand': [
                { name: 'Grand Palace', icon: 'üè∞', cost: '$15' },
                { name: 'Floating Market', icon: 'üõ∂', cost: '$10' },
                { name: 'Thai Massage', icon: 'üíÜ‚Äç‚ôÄÔ∏è', cost: '$8' },
                { name: 'Elephant Sanctuary', icon: 'üêò', cost: '$50' },
                { name: 'Temple Tour', icon: '‚õ©', cost: '$20' },
                { name: 'Night Market', icon: 'üåô', cost: '$5' }
            ],
            'india': [
                { name: 'Taj Mahal', icon: 'üè∞', cost: '‚Çπ50 (Indians)' },
                { name: 'Qutub Minar', icon: 'üïå', cost: '‚Çπ30 (Indians)' },
                { name: 'Red Fort', icon: 'üß±', cost: '‚Çπ35 (Indians)' },
                { name: 'Gateway of India', icon: 'üö™', cost: 'Free' },
                { name: 'Mysore Palace', icon: 'üèØ', cost: '‚Çπ70 (Indians)' },
                { name: 'Amber Fort, Jaipur', icon: 'üèú', cost: '‚Çπ100 (Indians)' },
                { name: 'Charminar, Hyderabad', icon: 'üïã', cost: '‚Çπ25 (Indians)' },
                { name: 'Golden Temple, Amritsar', icon: 'üåü', cost: 'Free' },
                { name: 'Meenakshi Temple, Madurai', icon: 'üå∫', cost: 'Free' },
                { name: 'Sundarbans National Park', icon: 'üå≥', cost: '‚Çπ60 (Indians)' },
                { name: 'Kaziranga National Park', icon: 'ü¶è', cost: '‚Çπ100 (Indians)' },
                { name: 'Ranthambore National Park', icon: 'üêÖ', cost: '‚Çπ150 (Indians)' },
                { name: 'Rann of Kutch', icon: 'üåæ', cost: '‚Çπ100 (Indians)' },
                { name: 'Coorg', icon: '‚òï', cost: 'Varies' },
                { name: 'Ooty', icon: 'üèûÔ∏è', cost: 'Free' },
                { name: 'Kanyakumari', icon: 'üåä', cost: 'Free' },
                { name: 'Munnar', icon: 'üåø', cost: 'Free' },
                { name: 'Alleppey', icon: 'üö§', cost: '‚Çπ400+ (Boating)' },
                { name: 'Leh', icon: 'üèîÔ∏è', cost: 'Free' },
                { name: 'Manali', icon: '‚ùÑÔ∏è', cost: 'Free' },
                { name: 'Varanasi', icon: 'üïâÔ∏è', cost: 'Free' },
                { name: 'Shimla', icon: 'üèîÔ∏è', cost: 'Free' },
                { name: 'Jaipur City', icon: 'üè∞', cost: 'Varies' },
                { name: 'Agra Fort', icon: 'üõ°Ô∏è', cost: '‚Çπ40 (Indians)' },
                { name: 'Pondicherry', icon: 'üèñÔ∏è', cost: 'Free' }
            ]
        };

        // Smart budget trip type selection
        document.addEventListener('DOMContentLoaded', function () {
            const smartTripTypeBtns = document.querySelectorAll('.smart-trip-type-btn');
            smartTripTypeBtns.forEach(btn => {
                btn.addEventListener('click', () => {
                    smartTripTypeBtns.forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    currentSmartTripType = btn.dataset.type;

                    // Update group size based on trip type
                    const groupSizeInput = document.getElementById('smartGroupSize');
                    switch (currentSmartTripType) {
                        case 'solo':
                            groupSizeInput.value = 1;
                            break;
                        case 'couple':
                            groupSizeInput.value = 2;
                            break;
                        case 'friends':
                            groupSizeInput.value = 4;
                            break;
                    }
                });
            });

            // Calculate button event listener
            document.getElementById('calculateSmartBtn').addEventListener('click', calculateSmartBudget);
        });

        function calculateSmartBudget() {
            const destination = document.getElementById('smartTripDestination').value.toLowerCase().trim();
            const days = parseInt(document.getElementById('smartTripDays').value) || 0;
            const groupSize = parseInt(document.getElementById('smartGroupSize').value) || 1;
            const totalBudget = parseInt(document.getElementById('smartTotalBudget').value) || 0;

            if (!destination || !days || !totalBudget) {
                alert('Please fill in all trip details!');
                return;
            }

            // Get budget percentages for destination
            const budgetPercentages = destinationBudgetData[destination] || destinationBudgetData['default'];

            // Calculate amounts
            const accommodationAmount = Math.round((totalBudget * budgetPercentages.accommodation) / 100);
            const foodAmount = Math.round((totalBudget * budgetPercentages.food) / 100);
            const transportAmount = Math.round((totalBudget * budgetPercentages.transport) / 100);
            const activitiesAmount = Math.round((totalBudget * budgetPercentages.activities) / 100);
            const emergencyAmount = Math.round((totalBudget * budgetPercentages.emergency) / 100);

            // Update UI
            document.getElementById('smartAccommodation').textContent = `$${accommodationAmount}`;
            document.getElementById('smartFood').textContent = `$${foodAmount}`;
            document.getElementById('smartTransport').textContent = `$${transportAmount}`;
            document.getElementById('smartActivities').textContent = `$${activitiesAmount}`;
            document.getElementById('smartEmergency').textContent = `$${emergencyAmount}`;

            const perPerson = Math.round(totalBudget / groupSize);
            const perDay = Math.round(totalBudget / days);

            document.getElementById('smartTotalDisplay').textContent = `$${totalBudget}`;
            document.getElementById('smartPerPerson').textContent = `$${perPerson}`;
            document.getElementById('smartPerDay').textContent = `$${perDay}`;

            // Update trip advice
            updateSmartTripAdvice(destination, days, groupSize, totalBudget);

            // Update map
            updateSmartBudgetMap(destination);
        }

        function updateSmartTripAdvice(destination, days, groupSize, budget) {
            const adviceContainer = document.getElementById('smartTripAdvice');
            const advice = tripAdviceData[destination] || tripAdviceData['default'];

            let adviceHTML = '';

            // Budget advice
            const perPersonPerDay = Math.round(budget / (groupSize * days));
            if (perPersonPerDay < 50) {
                adviceHTML += `<div class="advice-item warning">
                    <span class="advice-icon">‚ö†Ô∏è</span>
                    <span>Budget is tight - consider hostels and street food</span>
                </div>`;
            } else if (perPersonPerDay > 200) {
                adviceHTML += `<div class="advice-item success">
                    <span class="advice-icon">‚ú®</span>
                    <span>Great budget! You can enjoy premium experiences</span>
                </div>`;
            }

            // Duration advice
            if (days < 3) {
                adviceHTML += `<div class="advice-item info">
                    <span class="advice-icon">‚è∞</span>
                    <span>Short trip - focus on must-see attractions</span>
                </div>`;
            }

            // Destination-specific advice
            advice.forEach(tip => {
                adviceHTML += `<div class="advice-item">
                    <span class="advice-icon">üí°</span>
                    <span>${tip}</span>
                </div>`;
            });

            adviceContainer.innerHTML = adviceHTML;
        }

        function getDestinationCoords(destination) {
            const coords = {
                'paris': [48.8566, 2.3522],
                'tokyo': [35.6762, 139.6503],
                'bali': [-8.3405, 115.0920],
                'london': [51.5074, -0.1278],
                'new york': [40.7128, -74.0060],
                'thailand': [13.7563, 100.5018],
                'rome': [41.9028, 12.4964],
                'barcelona': [41.3851, 2.1734],
                'amsterdam': [52.3676, 4.9041],
                'dubai': [25.2048, 55.2708],
                'delhi': [28.6139, 77.2090],
                'mumbai': [19.0760, 72.8777],
                'bangalore': [12.9716, 77.5946],
                'chennai': [13.0827, 80.2707],
                'hyderabad': [17.3850, 78.4867],
                'kolkata': [22.5726, 88.3639],
                'jaipur': [26.9124, 75.7873],
                'goa': [15.2993, 74.1240],
                'leh': [34.1526, 77.5770],
                'manali': [32.2396, 77.1887],
                'shimla': [31.1048, 77.1734],
                'varanasi': [25.3176, 82.9739],
                'agra': [27.1767, 78.0081],
                'ooty': [11.4064, 76.6932],
                'sundarbans national park': [21.9497, 88.8915],
                'kaziranga national park': [26.5775, 93.1711],
                'kanyakumari': [8.0883, 77.5385],
                'coorg': [12.3375, 75.8069],
                'munnar': [10.0889, 77.0595],
                'alleppey': [9.4981, 76.3388]
            };
            return coords[destination] || [48.8566, 2.3522];
        }

        function initSmartBudgetMap() {
            if (smartBudgetMap) {
                smartBudgetMap.remove();
            }

            const coords = [48.8566, 2.3522]; // Default to Paris
            smartBudgetMap = L.map('smartBudgetMap').setView(coords, 10);
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '¬© OpenStreetMap contributors'
            }).addTo(smartBudgetMap);

            L.marker(coords).addTo(smartBudgetMap)
                .bindPopup('Paris, France')
                .openPopup();
        }

        function updateSmartBudgetMap(destination) {
            if (!smartBudgetMap) {
                initSmartBudgetMap();
                return;
            }

            // Get coordinates for destination
            const coords = getDestinationCoords(destination);

            // Clear existing markers
            smartBudgetMap.eachLayer(layer => {
                if (layer instanceof L.Marker) {
                    smartBudgetMap.removeLayer(layer);
                }
            });

            // Update map view and marker
            smartBudgetMap.setView(coords, 10);
            L.marker(coords).addTo(smartBudgetMap)
                .bindPopup(destination.charAt(0).toUpperCase() + destination.slice(1))
                .openPopup();

            // Update attractions
            updateSmartAttractions(destination);
        }

        function updateSmartAttractions(destination) {
            const attractionsGrid = document.getElementById('smartAttractionsGrid');
            const attractions = destinationAttractions[destination] || [
                { name: 'Local Attractions', icon: 'üìç', cost: 'Varies' },
                { name: 'Museums', icon: 'üèõ', cost: '$10-20' },
                { name: 'Local Tours', icon: 'üöå', cost: '$30-50' }
            ];

            attractionsGrid.innerHTML = attractions.map(attraction => `
                <div class="attraction-card">
                    <div class="attraction-icon">${attraction.icon}</div>
                    <div class="attraction-info">
                        <h4>${attraction.name}</h4>
                        <p class="attraction-cost">${attraction.cost}</p>
                    </div>
                </div>
            `).join('');
        }

        function initPlannerMap() {
            if (plannerMapInstance) {
                plannerMapInstance.remove();
            }

            const coords = [48.8566, 2.3522]; // Default to Paris
            plannerMapInstance = L.map('plannerMap').setView(coords, 10);
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '¬© OpenStreetMap contributors'
            }).addTo(plannerMapInstance);

            L.marker(coords).addTo(plannerMapInstance)
                .bindPopup('Paris, France')
                .openPopup();
        }

        function updatePlannerMap(destination) {
            if (!plannerMapInstance) {
                initPlannerMap();
                return;
            }

            const coords = getDestinationCoords(destination.toLowerCase());

            // Clear existing markers
            plannerMapInstance.eachLayer(layer => {
                if (layer instanceof L.Marker) {
                    plannerMapInstance.removeLayer(layer);
                }
            });

            // Update map view and marker
            plannerMapInstance.setView(coords, 10);
            L.marker(coords).addTo(plannerMapInstance)
                .bindPopup(destination)
                .openPopup();
        }

        // Memory functions
        function filterMemories(filter) {
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.currentTarget.classList.add('active');

            console.log('Filtering memories by:', filter);
        }

        // File upload handler
        document.addEventListener('DOMContentLoaded', function () {
            const photoUpload = document.getElementById('photoUpload');
            if (photoUpload) {
                photoUpload.addEventListener('change', function (e) {
                    const files = e.target.files;
                    console.log('Uploaded files:', files.length);
                    // Handle file upload logic here
                });
            }
        });

        // Logout function
        function logout() {
            if (confirm('Are you sure you want to logout?')) {
                // Handle logout logic
                console.log('Logging out...');
                // Redirect to login page
                window.location.href = 'main.html';
            }
        }

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function () {
            // Set default values
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('startDate').value = today;

            // Load default data
            console.log('TripPlanner Dashboard initialized');
        });

        // Responsive handling
        window.addEventListener('resize', function () {
            if (window.innerWidth > 768) {
                document.getElementById('sidebar').classList.remove('open');
            }
        });
    </script>
    <!-- Budget Script -->
    <script src="smart-budget.js"></script> <!-- Create this file with the smart logic you shared -->

    <!-- üëá Appwrite Username Display Script -->
    <script type="module">
        import { Client, Account } from "https://cdn.jsdelivr.net/npm/appwrite@13.0.1/+esm";

        const client = new Client();
        const account = new Account(client);

        client
            .setEndpoint("https://fra.cloud.appwrite.io/v1") // ‚úÖ Your endpoint
            .setProject("68860401002a4d8a099f");             // ‚úÖ Your project ID

        account.get()
            .then(user => {
                const nameSpan = document.getElementById("userName");
                if (nameSpan) {
                    nameSpan.textContent = `Welcome back, ${user.name || user.email.split('@')[0]}!`;
                }
            })
            .catch(error => {
                console.error("Error fetching Appwrite user:", error);
            });
    </script>
</body>
</html>
